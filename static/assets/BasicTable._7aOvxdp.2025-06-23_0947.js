import{a as j}from"./axios.xsH4HHeE.2025-06-23_0947.js";import{s as q}from"./serviceConfig.B3P35qda.2025-06-23_0947.js";import{d as A}from"./dayjs.DXEKZA6n.2025-06-23_0947.js";import{d as Q,r as y,X as $,k as W,j as G,c as w,P as t,H as a,ag as d,u as r,O as k,a6 as x,a as s,L as H,M as g,t as X,o as b,G as T}from"./@vue.BDy9tIRg.2025-06-23_0947.js";const F=j.create({timeout:1e3*12});F.defaults.headers.post["Content-Type"]="application/json";const D=e=>Object.keys(e).filter(m=>!!e[m]).map(m=>`${encodeURIComponent(m)}=${encodeURIComponent(e[m])}`).join("&"),J=async e=>(await F.get(`${q.usiApi}/abnormals/?${D(e)}`)).data;var S=(e=>(e.ASM="ASM",e.PD1="PD1",e.PD2="PD2",e.PD3="PD3",e.TE="TE",e.ME="ME",e.SME="SME",e.QMD="QMD",e.SMT="SMT",e.GA="GA",e.IE="IE",e.SASM="SASM",e.SWH="SWH",e.EQ="EQ",e.FAEE="FAEE",e.WH="WH",e.IT="IT",e.SCM="SCM",e.OPM="OPM",e.HR="HR",e.EHS="EHS",e.PT="PT",e.PE="PE",e.FD="FD",e.ALL="ALL",e.FA="FA",e))(S||{});const K=Object.values(S),Z=[1,2,3],ee={style:{display:"flex",width:"100%"}},te={style:{"margin-top":"20px"}},re=Q({__name:"BasicTable",setup(e){const m=y(),M=y(),E=y([]),C=y(0),n=$({employee_id:"",start_time:void 0,end_time:void 0,floor_number:1,query:"",count_total:!0,limit:100,offset:0,department:""}),v=W(()=>n.offset/n.limit+1);G(async()=>{await f()});async function f(){n.department===S.ALL&&(n.department="");const u=await J(n);u.status===200&&(E.value=u.records,C.value=u.total)}function L(u){const{prop:l,order:c}=u;c&&(n.order_by=l,n.order_direction=c,f())}const R=u=>{n.offset=(u-1)*n.limit,f()};function O(){M.value.resetFields()}return(u,l)=>{const c=d("el-option"),P=d("el-select"),p=d("el-form-item"),_=d("el-col"),U=d("el-input"),V=d("el-date-picker"),h=d("el-button"),I=d("el-row"),B=d("el-form"),Y=d("el-card"),i=d("el-table-column"),z=d("el-table"),N=d("el-pagination");return b(),w("div",null,[t(Y,{shadow:"never"},{default:a(()=>[t(B,{ref_key:"formRef",ref:M,model:r(n),inline:!0,"label-width":"auto"},{default:a(()=>[t(I,{gutter:1},{default:a(()=>[t(_,{span:4},{default:a(()=>[t(p,{label:"Department",prop:"department",style:{width:"100%"}},{default:a(()=>[t(P,{placeholder:"Select department",modelValue:r(n).department,"onUpdate:modelValue":l[0]||(l[0]=o=>r(n).department=o)},{default:a(()=>[(b(!0),w(k,null,x(r(K),o=>(b(),T(c,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(_,{span:4},{default:a(()=>[t(p,{label:"Floor",prop:"floor_number",style:{width:"100%"}},{default:a(()=>[t(P,{placeholder:"Select floor number",modelValue:r(n).floor_number,"onUpdate:modelValue":l[1]||(l[1]=o=>r(n).floor_number=o)},{default:a(()=>[(b(!0),w(k,null,x(r(Z),o=>(b(),T(c,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(_,{span:4},{default:a(()=>[t(p,{label:"Search",prop:"query",style:{width:"100%"}},{default:a(()=>[t(U,{modelValue:r(n).query,"onUpdate:modelValue":l[2]||(l[2]=o=>r(n).query=o),placeholder:"Enter query"},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{span:4},{default:a(()=>[t(p,{label:"Begin date",prop:"start_time",style:{width:"100%"}},{default:a(()=>[t(V,{placeholder:"Begin date",modelValue:r(n).start_time,"onUpdate:modelValue":l[3]||(l[3]=o=>r(n).start_time=o),type:"datetime","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{span:4},{default:a(()=>[t(p,{label:"End date",prop:"end_time",style:{width:"100%"}},{default:a(()=>[t(V,{placeholder:"End date",modelValue:r(n).end_time,"onUpdate:modelValue":l[4]||(l[4]=o=>r(n).end_time=o),type:"datetime","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{span:4,style:{"margin-left":"auto","margin-bottom":"0px"}},{default:a(()=>[t(p,{label:"",style:{width:"100%"}},{default:a(()=>[s("div",ee,[l[10]||(l[10]=s("div",{style:{flex:"1"}},null,-1)),t(h,{onClick:l[5]||(l[5]=o=>O())},{default:a(()=>l[8]||(l[8]=[H("reset")])),_:1}),t(h,{type:"primary",onClick:f},{default:a(()=>l[9]||(l[9]=[H("Search")])),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(Y,{style:{"margin-top":"20px"},shadow:"never"},{default:a(()=>[t(z,{stripe:"",style:{width:"100%"},ref_key:"tableRef",ref:m,data:r(E),onSortChange:L},{default:a(()=>[t(i,{fixed:"",type:"index",width:"50",label:"No."}),t(i,{prop:"employee_id",label:"Employee ID",width:"100"}),t(i,{prop:"first_name",label:"First Name",width:"100"}),t(i,{prop:"last_name",label:"Last Name",width:"100"}),t(i,{prop:"department",label:"Department",width:"150"}),t(i,{prop:"out_time",label:"Out time",sortable:"custom",width:"170"},{default:a(o=>[s("div",null,[s("p",null,g(r(A)(o.row.out_time).format("YYYY/MM/DD HH:mm")),1),l[11]||(l[11]=s("hr",null,null,-1)),s("p",null,g(o.row.checkout_station),1)])]),_:1}),t(i,{prop:"in_time",label:"In time",sortable:"custom",width:"170"},{default:a(o=>[s("div",null,[s("p",null,g(r(A)(o.row.in_time).format("YYYY/MM/DD HH:mm")),1),l[12]||(l[12]=s("hr",null,null,-1)),s("p",null,g(o.row.checkin_station),1)])]),_:1}),t(i,{prop:"total_mins",label:"gap time (minutes)",sortable:"custom"})]),_:1},8,["data"]),s("div",te,[t(N,{layout:"total, prev, pager, next, sizes","current-page":r(v),"onUpdate:currentPage":l[6]||(l[6]=o=>X(v)?v.value=o:null),"page-size":r(n).limit,"onUpdate:pageSize":l[7]||(l[7]=o=>r(n).limit=o),"page-sizes":[100,150,200,400],total:r(C),onSizeChange:f,onCurrentChange:R},null,8,["current-page","page-size","total"])])]),_:1})])}}});export{re as default};
