import{e as p,u as x,i as y,a as $,b as w,c as k,d as S,f as W,g as L,h as M,j as z,k as C,l as O,m as T,n as A,o as B,p as D}from"./echarts.D9Sbz-DV.2025-06-07_1308.js";import{d as E}from"./lodash-es.S0Y0Up6J.2025-06-07_1308.js";import{d as f,r as N,j as _,W as P,w as j,I as F,u as h,c as b,o as g,X as I,P as r,H as u,ag as d}from"./@vue.BDy9tIRg.2025-06-07_1308.js";import{s as J}from"./serviceConfig.B3P35qda.2025-06-07_1308.js";import{_ as U}from"./plugin-vueexport-helper.DlAUqK2U.2025-06-07_1308.js";import"./zrender.CP2sHTcl.2025-06-07_1308.js";import"./tslib.BDyQ-Jie.2025-06-07_1308.js";x([y,$,w,k,S,W,L,M,z,C,O,T,A,B,D]);const v=new WeakMap,m=new ResizeObserver(n=>{for(const e of n){const s=e.target,t=v.get(s);if(t){const a=e.borderBoxSize[0],o={width:a.inlineSize,height:a.blockSize};t(o)}}}),H={beforeMount(n,e){m.observe(n,{box:"border-box"});const s=E(e.value,200);v.set(n,s)},unmounted(n){m.unobserve(n)}},R=f({__name:"Chart",props:{option:{},registerMap:{type:Function}},setup(n){const e=n,s=N();let t=null,a=e.option;const o=()=>{t&&l(a)};_(()=>{l(e.option)}),P(()=>{c()}),j(()=>e.option,i=>{console.log("-----",i),a=i,l(i)});function c(){t&&(t.dispose(),t=null)}async function l(i){i&&(c(),t=p.init(s.value),e.registerMap&&await e.registerMap(p),t.clear(),t.setOption(i))}return(i,X)=>F((g(),b("div",{ref_key:"chartEl",ref:s},null,512)),[[h(H),o]])}}),V=f({__name:"Dashboard",setup(n){let e=I({title:{text:"Production live attendances"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"Live count",type:"bar",barWidth:"60%",data:[10,52,200,334,390,330,220]}]});return _(()=>{const s=new WebSocket(`${J.usiApi}/checking-events/live-attendances`);return s.onmessage=t=>{const a=JSON.parse(JSON.parse(t.data));e.xAxis=[{type:"category",data:a.live_attendances.map(o=>o.time),axisTick:{alignWithLabel:!0}}],e.series=[{name:"Live count",type:"bar",barWidth:"60%",data:a.live_attendances.map(o=>o.live_count)}]},()=>{console.log("closing"),s.close()}}),(s,t)=>{const a=d("el-col"),o=d("el-row");return g(),b("div",null,[r(o,{gutter:20},{default:u(()=>[r(a,{span:12},{default:u(()=>[r(R,{option:h(e),style:{height:"405px"}},null,8,["option"])]),_:1}),r(a,{span:12})]),_:1})])}}}),te=U(V,[["__scopeId","data-v-4092b52d"]]);export{te as default};
